<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EdgeWriter AI ‚Ä¢ Local Writing Assistant</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { fontFamily: { sans: ['Inter', 'system-ui'] } } }
    }
  </script>
  <style>
    body { 
      background: #020617; 
      color: #f8fafc; 
      background-image: 
        radial-gradient(circle at 0% 0%, rgba(124, 58, 237, 0.15) 0, transparent 50%),
        radial-gradient(circle at 100% 0%, rgba(219, 39, 119, 0.15) 0, transparent 50%),
        radial-gradient(circle at 50% 100%, rgba(37, 99, 235, 0.15) 0, transparent 50%);
      min-height: 100vh;
      overflow-x: hidden;
    }
    .blob { position: absolute; border-radius: 50%; filter: blur(120px); opacity: 0.4; animation: float 25s infinite ease-in-out; z-index: -1; }
    .blob-1 { top: -10%; left: -10%; width: 600px; height: 600px; background: #6b21a8; animation-delay: 0s; }
    .blob-2 { bottom: -10%; right: -10%; width: 700px; height: 700px; background: #be185d; animation-delay: -8s; }
    .blob-3 { top: 40%; left: 50%; width: 500px; height: 500px; background: #1e40af; animation-delay: -15s; }
    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50% { transform: translate(40px, -60px) scale(1.1); }
    }
    .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.1); }
    .glow-btn { background: linear-gradient(135deg, #a855f7, #ec4899); box-shadow: 0 10px 30px rgba(168, 85, 247, 0.4); }
    .glow-btn:hover { box-shadow: 0 15px 40px rgba(168, 85, 247, 0.6); }
    .status-dot { 
      width: 10px; height: 10px; border-radius: 50%; display: inline-block; 
      position: relative;
    }
    .status-dot::after {
      content: ''; position: absolute; top: -3px; left: -3px; right: -3px; bottom: -3px;
      border-radius: 50%; opacity: 0.3; z-index: -1;
    }
    .status-dot.active { background-color: #4ade80; }
    .status-dot.active::after { background-color: #4ade80; animation: ping 2s cubic-bezier(0, 0, 0.2, 1) infinite; }
    .status-dot.busy { background-color: #fbbf24; }
    .status-dot.busy::after { background-color: #fbbf24; animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    .status-dot.error { background-color: #f87171; }
    .status-dot.offline { background-color: #6b7280; }
    @keyframes ping { 75%, 100% { transform: scale(2); opacity: 0; } }
    @keyframes pulse { 50% { opacity: .5; } }
    textarea::-webkit-scrollbar { width: 6px; }
    textarea::-webkit-scrollbar-track { background: transparent; }
    textarea::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
    textarea::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }
    .chat-bubble { max-width: 80%; padding: 0.75rem 1rem; border-radius: 1rem; word-wrap: break-word; animation: slideIn 0.2s ease-out; }
    .chat-bubble.user { background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%); color: #fff; margin-left: auto; border-bottom-right-radius: 0.25rem; }
    .chat-bubble.assistant { background: rgba(255, 255, 255, 0.05); color: #f1f5f9; border: 1px solid rgba(255, 255, 255, 0.08); margin-right: auto; border-bottom-left-radius: 0.25rem; }
    .chat-bubble.assistant.generating { opacity: 0.7; }
    @keyframes slideIn { from { opacity: 0; transform: translateY(8px);} to { opacity: 1; transform: translateY(0);} }
    .typing-indicator { display: inline-flex; gap: 4px; padding: 0.5rem; }
    .typing-indicator span { width: 8px; height: 8px; background: #94a3b8; border-radius: 50%; animation: typing 1.2s infinite; }
    .typing-indicator span:nth-child(2) { animation-delay: 0.15s; }
    .typing-indicator span:nth-child(3) { animation-delay: 0.3s; }
    @keyframes typing { 0%, 60%, 100% { transform: translateY(0); opacity: 0.7; } 30% { transform: translateY(-8px); opacity: 1; } }
  </style>
</head>
<body class="min-h-screen relative p-4 md:p-8">

  <div class="blob blob-1"></div>
  <div class="blob blob-2"></div>
  <div class="blob blob-3"></div>

  <div class="container max-w-6xl mx-auto relative z-10">
    <!-- Header -->
    <header class="glass rounded-2xl p-6 mb-8 flex justify-between items-center">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg">
          <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z"></path></svg>
        </div>
        <div>
          <h1 class="text-xl font-bold tracking-tight text-white">EdgeWriter AI</h1>
          <p class="text-xs text-slate-400">Phi-3 Mini ‚Ä¢ 100% Local ‚Ä¢ Private</p>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <div class="hidden md:block text-right">
          <p id="device-status" class="text-xs font-medium text-slate-300">Checking Server...</p>
          <p class="text-[10px] text-slate-500 uppercase tracking-wider">Server Status</p>
        </div>
        <div id="status-indicator" class="status-dot offline"></div>
      </div>
    </header>

    <!-- Mode selector -->
    <div class="glass rounded-2xl p-2 mb-6 flex gap-2">
      <button id="writing-mode-btn" class="flex-1 px-4 py-2 rounded-xl font-medium transition bg-gradient-to-r from-purple-500 to-pink-500 text-white">
        ‚úçÔ∏è Writing Assistant
      </button>
      <button id="chat-mode-btn" class="flex-1 px-4 py-2 rounded-xl font-medium transition bg-white/5 text-slate-300 hover:bg-white/10">
        üí¨ Chat Mode
      </button>
    </div>

    <div id="writing-wrapper" class="grid lg:grid-cols-2 gap-6">
      <!-- Input Panel -->
      <div class="glass rounded-2xl p-6 shadow-2xl flex flex-col h-[600px]">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-lg font-semibold">Input</h2>
          <div class="flex gap-2">
            <button onclick="pasteText()" class="text-xs bg-white/5 hover:bg-white/10 px-3 py-1.5 rounded-lg transition">Paste</button>
            <button onclick="clearAll()" class="text-xs bg-white/5 hover:bg-white/10 px-3 py-1.5 rounded-lg transition">Clear</button>
          </div>
        </div>

        <div class="mb-4 grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs text-slate-400 mb-2 ml-1">Task</label>
            <select id="task" class="w-full px-4 py-2.5 bg-slate-800/50 border border-slate-700 rounded-xl focus:border-purple-500 focus:outline-none transition text-sm">
              <option value="Proofread">Proofread</option>
              <option value="Paraphrase">Paraphrase</option>
              <option value="Summarize">Summarize</option>
              <option value="Rewrite">Rewrite</option>
            </select>
          </div>
          <div id="tone-container" style="display: none;">
            <label class="block text-xs text-slate-400 mb-2 ml-1">Tone</label>
            <select id="tone" class="w-full px-4 py-2.5 bg-slate-800/50 border border-slate-700 rounded-xl focus:border-purple-500 focus:outline-none transition text-sm">
              <option value="Neutral">Neutral</option>
              <option value="Professional">Professional</option>
              <option value="Friendly">Friendly</option>
              <option value="Concise">Concise</option>
              <option value="Academic">Academic</option>
              <option value="Custom">Custom...</option>
            </select>
          </div>
        </div>
        <div id="custom-tone-container" style="display: none;" class="mb-4">
          <label class="block text-xs text-slate-400 mb-2 ml-1">Custom Tone Description</label>
          <input id="custom-tone" type="text" placeholder="e.g., casual, humorous, technical..." class="w-full px-4 py-2.5 bg-slate-800/50 border border-slate-700 rounded-xl focus:border-purple-500 focus:outline-none transition text-sm" />
        </div>
        <p class="text-[10px] text-slate-500 mb-4 ml-1">
          <svg class="w-3 h-3 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
          Phi-3 excels at reasoning & logic tasks: proofreading, summarization, and structured text processing.
        </p>

        <textarea id="input" placeholder="Type or paste your text here..." class="w-full flex-1 p-4 bg-slate-800/50 border border-slate-700 rounded-xl resize-none focus:border-purple-500 focus:outline-none transition text-sm leading-relaxed"></textarea>

        <div class="flex justify-between text-xs text-slate-400 mt-3 px-1">
          <span id="char-count">0 characters</span>
          <span id="word-count">0 words</span>
          <span id="token-est">~0 tokens</span>
        </div>

        <button id="generate-btn" class="glow-btn w-full mt-4 py-3 rounded-xl text-white font-semibold transition flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
          <span id="btn-text">Check Server</span>
          <div id="spinner" class="hidden w-5 h-5 border-3 border-white/30 border-t-white rounded-full animate-spin"></div>
        </button>
      </div>

      <!-- Output Panel -->
      <section class="flex flex-col gap-4 h-[600px]">
        <div class="glass rounded-2xl p-6 flex-1 flex flex-col relative overflow-hidden">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-semibold">Refined Output</h2>
            <button onclick="copyOutput()" class="text-xs bg-white/5 hover:bg-white/10 px-3 py-1.5 rounded-lg transition">
              Copy
            </button>
          </div>
          <textarea id="output" readonly class="w-full flex-1 bg-transparent text-slate-200 resize-none text-sm leading-relaxed overflow-auto focus:outline-none" placeholder="Result will appear here..."></textarea>
          
          <!-- Loader Overlay -->
          <div id="loader" class="hidden absolute inset-0 flex flex-col items-center justify-center bg-slate-900/70 backdrop-blur-sm rounded-xl">
            <div class="w-10 h-10 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mb-3"></div>
            <span class="text-purple-300 mb-3" id="loader-status">Processing...</span>
            <div class="w-64 h-2 bg-slate-700 rounded-full overflow-hidden">
              <div id="progress-bar" class="h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-300" style="width: 0%"></div>
            </div>
          </div>
        </div>

        <!-- Inference Telemetry -->
        <div class="glass rounded-2xl p-4">
          <h3 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Inference Telemetry</h3>
          <div class="grid grid-cols-4 gap-3 text-center">
            <div class="bg-white/5 rounded-xl p-3">
              <p class="text-[10px] text-slate-400">Engine</p>
              <p id="metric-engine" class="text-sm font-semibold text-white">--</p>
            </div>
            <div class="bg-white/5 rounded-xl p-3">
              <p class="text-[10px] text-slate-400">Latency</p>
              <p id="metric-time" class="text-sm font-semibold text-emerald-400">--</p>
            </div>
            <div class="bg-white/5 rounded-xl p-3">
              <p class="text-[10px] text-slate-400">Prompt Tokens</p>
              <p id="metric-prompt-tokens" class="text-sm font-semibold text-purple-400">--</p>
            </div>
            <div class="bg-white/5 rounded-xl p-3">
              <p class="text-[10px] text-slate-400">Completion Tokens</p>
              <p id="metric-completion-tokens" class="text-sm font-semibold text-pink-400">--</p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Chat Section -->
    <section id="chat-section" class="hidden glass rounded-2xl p-6 mt-4 flex flex-col h-[760px]">
      <div class="mb-4 bg-amber-500/10 border border-amber-500/30 rounded-xl p-4 text-sm text-amber-100">
        ‚ö†Ô∏è Experimental chat mode. Responses may be less accurate than writing mode.
      </div>

      <div id="chat-messages" class="flex-1 overflow-y-auto space-y-3 px-1">
        <div class="text-center text-slate-500 text-sm py-8">Start a conversation...</div>
      </div>

      <div class="flex gap-2 mt-4">
        <input id="chat-input" type="text" class="flex-1 px-4 py-3 bg-slate-800/50 border border-slate-700 rounded-xl text-sm focus:border-purple-500 focus:outline-none disabled:opacity-50" placeholder="Type your message..." disabled />
        <button id="chat-send" class="px-5 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-semibold disabled:opacity-50">Send</button>
      </div>
      <div class="flex gap-2 mt-2">
        <button id="chat-clear" class="text-xs bg-white/5 hover:bg-white/10 px-3 py-1.5 rounded-lg transition text-slate-300 disabled:opacity-50" disabled>
          Clear History
        </button>
      </div>
    </section>

    <!-- Hardware Configuration Footer -->
    <footer class="glass rounded-2xl p-5 mt-6">
      <h3 class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">
        <svg class="w-3 h-3 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 01-2 2v4a2 2 0 012 2h14a2 2 0 012-2v-4a2 2 0 01-2-2m-2-4h.01M17 16h.01"></path></svg>
        Hardware Configuration
      </h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-xs">
        <div>
          <p class="text-slate-500 mb-1">Platform</p>
          <p id="hw-platform" class="text-white font-medium">--</p>
        </div>
        <div>
          <p class="text-slate-500 mb-1">CPU Cores</p>
          <p id="hw-cores" class="text-white font-medium">--</p>
        </div>
        <div>
          <p class="text-slate-500 mb-1">Memory</p>
          <p id="hw-memory" class="text-white font-medium">--</p>
        </div>
        <div>
          <p class="text-slate-500 mb-1">GPU Support</p>
          <p id="hw-gpu" class="text-white font-medium">--</p>
        </div>
      </div>
      <p class="text-[10px] text-slate-500 mt-3">
        <svg class="w-3 h-3 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
        All inference runs locally via Phi-3 Mini. No data is transmitted externally.
      </p>
    </footer>
  </div>

  <script src="index.js"></script>
</body>
</html>